<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A9/A9G Libraries using Ai-Thinker GPRS C SDK  0.1.0: a9_spi_lib/src/spi_lib.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A9/A9G Libraries using Ai-Thinker GPRS C SDK  0.1.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('spi__lib_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">spi_lib.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;stdint.h&quot;</code><br />
<code>#include &quot;stdbool.h&quot;</code><br />
<code>#include &quot;time.h&quot;</code><br />
<code>#include &quot;api_os.h&quot;</code><br />
<code>#include &quot;api_debug.h&quot;</code><br />
<code>#include &quot;api_hal_spi.h&quot;</code><br />
<code>#include &quot;api_hal_uart.h&quot;</code><br />
<code>#include &quot;string.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a21025abe99f944f0f4f1a7ce740d988b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#a21025abe99f944f0f4f1a7ce740d988b">init_spi_direct_polling</a> (SPI_ID_t SPIx, SPI_CS_t chip_select, uint32_t freq, SPI_Line_t line, bool tx_only, uint8_t clk_polarity, uint8_t clk_phase, bool cs_active_low, SPI_Data_Bits_t data_bits)</td></tr>
<tr class="memdesc:a21025abe99f944f0f4f1a7ce740d988b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPI with direct polling.  <a href="spi__lib_8c.html#a21025abe99f944f0f4f1a7ce740d988b">More...</a><br /></td></tr>
<tr class="separator:a21025abe99f944f0f4f1a7ce740d988b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26894d563c24c52fc082e085079a242a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#a26894d563c24c52fc082e085079a242a">init_spi_dma_polling</a> (SPI_ID_t SPIx, SPI_CS_t chip_select, uint32_t freq, SPI_Line_t line, bool tx_only, uint8_t clk_polarity, uint8_t clk_phase, bool cs_active_low, SPI_Data_Bits_t data_bits)</td></tr>
<tr class="memdesc:a26894d563c24c52fc082e085079a242a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPI with DMA polling.  <a href="spi__lib_8c.html#a26894d563c24c52fc082e085079a242a">More...</a><br /></td></tr>
<tr class="separator:a26894d563c24c52fc082e085079a242a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fead569d668a79ef4ccc6dcb6464439"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#a5fead569d668a79ef4ccc6dcb6464439">init_spi_direct_irq</a> (SPI_ID_t SPIx, SPI_CS_t chip_select, uint32_t freq, SPI_Line_t line, bool tx_only, uint8_t clk_polarity, uint8_t clk_phase, bool cs_active_low, SPI_Data_Bits_t data_bits, SPI_Irq_Handler_t irq_handler, SPI_Irq_Flags_t irq_mask)</td></tr>
<tr class="memdesc:a5fead569d668a79ef4ccc6dcb6464439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPI with Direct IRQ.  <a href="spi__lib_8c.html#a5fead569d668a79ef4ccc6dcb6464439">More...</a><br /></td></tr>
<tr class="separator:a5fead569d668a79ef4ccc6dcb6464439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3e416c6ff38d56b6ec2a22d24eb1faa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#ab3e416c6ff38d56b6ec2a22d24eb1faa">init_spi_dma_irq</a> (SPI_ID_t SPIx, SPI_CS_t chip_select, uint32_t freq, SPI_Line_t line, bool tx_only, uint8_t clk_polarity, uint8_t clk_phase, bool cs_active_low, SPI_Data_Bits_t data_bits, SPI_Irq_Handler_t irq_handler, SPI_Irq_Flags_t irq_mask)</td></tr>
<tr class="memdesc:ab3e416c6ff38d56b6ec2a22d24eb1faa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize SPI with DMA IRQ.  <a href="spi__lib_8c.html#ab3e416c6ff38d56b6ec2a22d24eb1faa">More...</a><br /></td></tr>
<tr class="separator:ab3e416c6ff38d56b6ec2a22d24eb1faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9595f3065afd136c4ca5db78ce04f0cd"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#a9595f3065afd136c4ca5db78ce04f0cd">SPI_ReadOneByte</a> (SPI_ID_t SPIx)</td></tr>
<tr class="memdesc:a9595f3065afd136c4ca5db78ce04f0cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read one byte from the SPI.  <a href="spi__lib_8c.html#a9595f3065afd136c4ca5db78ce04f0cd">More...</a><br /></td></tr>
<tr class="separator:a9595f3065afd136c4ca5db78ce04f0cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b73329a484334559ad9eb94431b1b79"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#a3b73329a484334559ad9eb94431b1b79">SPI_WriteReadData</a> (SPI_ID_t SPIx, uint8_t *s_data, uint8_t *r_data, uint32_t length)</td></tr>
<tr class="memdesc:a3b73329a484334559ad9eb94431b1b79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and Write data to SPI.  <a href="spi__lib_8c.html#a3b73329a484334559ad9eb94431b1b79">More...</a><br /></td></tr>
<tr class="separator:a3b73329a484334559ad9eb94431b1b79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02e8bb3e1d2f0bdbef202a336257c569"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#a02e8bb3e1d2f0bdbef202a336257c569">SPI_WriteReadByte</a> (SPI_ID_t SPIx, uint8_t data)</td></tr>
<tr class="memdesc:a02e8bb3e1d2f0bdbef202a336257c569"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read one byte from the SPI.  <a href="spi__lib_8c.html#a02e8bb3e1d2f0bdbef202a336257c569">More...</a><br /></td></tr>
<tr class="separator:a02e8bb3e1d2f0bdbef202a336257c569"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4d15ef0c77b6360b25700df0af3348c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="spi__lib_8c.html#ab4d15ef0c77b6360b25700df0af3348c">SPI_DmaReadWriteData</a> (SPI_ID_t SPIx, uint8_t *s_addr, uint8_t *r_addr, uint32_t length)</td></tr>
<tr class="memdesc:ab4d15ef0c77b6360b25700df0af3348c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read and Write data to SPI in DMA mode.  <a href="spi__lib_8c.html#ab4d15ef0c77b6360b25700df0af3348c">More...</a><br /></td></tr>
<tr class="separator:ab4d15ef0c77b6360b25700df0af3348c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5fead569d668a79ef4ccc6dcb6464439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fead569d668a79ef4ccc6dcb6464439">&#9670;&nbsp;</a></span>init_spi_direct_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool init_spi_direct_irq </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_CS_t&#160;</td>
          <td class="paramname"><em>chip_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Line_t&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tx_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_polarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cs_active_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Data_Bits_t&#160;</td>
          <td class="paramname"><em>data_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Irq_Handler_t&#160;</td>
          <td class="paramname"><em>irq_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Irq_Flags_t&#160;</td>
          <td class="paramname"><em>irq_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPI with Direct IRQ. </p>
<p>The application sends/receives the data directly to/from the hardware module. The number of bytes actually sent/received is returned. An Irq can be generated when the Tx/Rx FIFO reaches the pre-programmed level.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number </td></tr>
    <tr><td class="paramname">chip_select</td><td>Select the CS pin </td></tr>
    <tr><td class="paramname">freq</td><td>SPI clock frequency in bits/s; up to 13Mbits/s (SPI_FREQ_MAX) </td></tr>
    <tr><td class="paramname">line</td><td>Number of SPI Lines </td></tr>
    <tr><td class="paramname">tx_only</td><td>SPI tx only false: tx only disable true: tx only enable </td></tr>
    <tr><td class="paramname">clk_polarity</td><td>SPI Clk Polarity 0: when SPI is free,clk line is in low level 1: when SPI is free,clk line is in high level </td></tr>
    <tr><td class="paramname">clk_phase</td><td>SPI Clk Phase 0: SPI sampling data at the first edge 1: SPI sampling data at the second edge </td></tr>
    <tr><td class="paramname">cs_active_low</td><td>SPI CS Active Polarity true: CS Active Low false: CS Active High </td></tr>
    <tr><td class="paramname">data_bits</td><td>SPI framesize </td></tr>
    <tr><td class="paramname">irq_handler</td><td>Interrupt Handler </td></tr>
    <tr><td class="paramname">irq_mask</td><td>SPI Interrupt flags: check SPI_Irq_Flags_t struct</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool: return true if init success or false </dd></dl>

</div>
</div>
<a id="a21025abe99f944f0f4f1a7ce740d988b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21025abe99f944f0f4f1a7ce740d988b">&#9670;&nbsp;</a></span>init_spi_direct_polling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool init_spi_direct_polling </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_CS_t&#160;</td>
          <td class="paramname"><em>chip_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Line_t&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tx_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_polarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cs_active_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Data_Bits_t&#160;</td>
          <td class="paramname"><em>data_bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPI with direct polling. </p>
<p>The application sends/receives the data directly to/from the hardware module. The number of bytes actually sent/received is returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number </td></tr>
    <tr><td class="paramname">chip_select</td><td>Select the CS pin </td></tr>
    <tr><td class="paramname">freq</td><td>SPI clock frequency in bits/s; up to 13Mbits/s (SPI_FREQ_MAX) </td></tr>
    <tr><td class="paramname">line</td><td>Number of SPI Lines </td></tr>
    <tr><td class="paramname">tx_only</td><td>SPI tx only false: tx only disable true: tx only enable </td></tr>
    <tr><td class="paramname">clk_polarity</td><td>SPI Clk Polarity 0: when SPI is free,clk line is in low level 1: when SPI is free,clk line is in high level </td></tr>
    <tr><td class="paramname">clk_phase</td><td>SPI Clk Phase 0: SPI sampling data at the first edge 1: SPI sampling data at the second edge </td></tr>
    <tr><td class="paramname">cs_active_low</td><td>SPI CS Active Polarity true: CS Active Low false: CS Active High </td></tr>
    <tr><td class="paramname">data_bits</td><td>SPI framesize</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool: return true if init success or false </dd></dl>

</div>
</div>
<a id="ab3e416c6ff38d56b6ec2a22d24eb1faa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3e416c6ff38d56b6ec2a22d24eb1faa">&#9670;&nbsp;</a></span>init_spi_dma_irq()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool init_spi_dma_irq </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_CS_t&#160;</td>
          <td class="paramname"><em>chip_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Line_t&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tx_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_polarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cs_active_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Data_Bits_t&#160;</td>
          <td class="paramname"><em>data_bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Irq_Handler_t&#160;</td>
          <td class="paramname"><em>irq_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Irq_Flags_t&#160;</td>
          <td class="paramname"><em>irq_mask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPI with DMA IRQ. </p>
<p>The application sends/receives the data through a DMA to the hardware module. The function returns 0 when no DMA channel is available. No bytes are sent. The function returns the number of bytes to send when a DMA resource is available. They will all be sent. An IRQ is generated when the current transfer is finished. No new DMA transfer in the same direction will be allowed before the end of the previous transfer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number </td></tr>
    <tr><td class="paramname">chip_select</td><td>Select the CS pin </td></tr>
    <tr><td class="paramname">freq</td><td>SPI clock frequency in bits/s; up to 13Mbits/s (SPI_FREQ_MAX) </td></tr>
    <tr><td class="paramname">line</td><td>Number of SPI Lines </td></tr>
    <tr><td class="paramname">tx_only</td><td>SPI tx only false: tx only disable true: tx only enable </td></tr>
    <tr><td class="paramname">clk_polarity</td><td>SPI Clk Polarity 0: when SPI is free,clk line is in low level 1: when SPI is free,clk line is in high level </td></tr>
    <tr><td class="paramname">clk_phase</td><td>SPI Clk Phase 0: SPI sampling data at the first edge 1: SPI sampling data at the second edge </td></tr>
    <tr><td class="paramname">cs_active_low</td><td>SPI CS Active Polarity true: CS Active Low false: CS Active High </td></tr>
    <tr><td class="paramname">data_bits</td><td>SPI framesize </td></tr>
    <tr><td class="paramname">irq_handler</td><td>Interrupt Handler </td></tr>
    <tr><td class="paramname">irq_mask</td><td>SPI Interrupt flags: check SPI_Irq_Flags_t struct</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool: return true if init success or false </dd></dl>

</div>
</div>
<a id="a26894d563c24c52fc082e085079a242a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26894d563c24c52fc082e085079a242a">&#9670;&nbsp;</a></span>init_spi_dma_polling()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool init_spi_dma_polling </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_CS_t&#160;</td>
          <td class="paramname"><em>chip_select</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>freq</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Line_t&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>tx_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_polarity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clk_phase</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>cs_active_low</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SPI_Data_Bits_t&#160;</td>
          <td class="paramname"><em>data_bits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize SPI with DMA polling. </p>
<p>The application sends/receives the data through a DMA to the hardware module. The function returns 0 when no DMA channel is available. No bytes are sent. The function returns the number of bytes to send when a DMA resource is available. They will all be sent. A function allows to check if the previous DMA transfer is finished. No new DMA transfer in the same direction will be allowed before the end of the previous transfer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number </td></tr>
    <tr><td class="paramname">chip_select</td><td>Select the CS pin </td></tr>
    <tr><td class="paramname">freq</td><td>SPI clock frequency in bits/s; up to 13Mbits/s (SPI_FREQ_MAX) </td></tr>
    <tr><td class="paramname">line</td><td>Number of SPI Lines </td></tr>
    <tr><td class="paramname">tx_only</td><td>SPI tx only false: tx only disable true: tx only enable </td></tr>
    <tr><td class="paramname">clk_polarity</td><td>SPI Clk Polarity 0: when SPI is free,clk line is in low level 1: when SPI is free,clk line is in high level </td></tr>
    <tr><td class="paramname">clk_phase</td><td>SPI Clk Phase 0: SPI sampling data at the first edge 1: SPI sampling data at the second edge </td></tr>
    <tr><td class="paramname">cs_active_low</td><td>SPI CS Active Polarity true: CS Active Low false: CS Active High </td></tr>
    <tr><td class="paramname">data_bits</td><td>SPI framesize</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool: return true if init success or false </dd></dl>

</div>
</div>
<a id="ab4d15ef0c77b6360b25700df0af3348c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4d15ef0c77b6360b25700df0af3348c">&#9670;&nbsp;</a></span>SPI_DmaReadWriteData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t SPI_DmaReadWriteData </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>s_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>r_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and Write data to SPI in DMA mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number </td></tr>
    <tr><td class="paramname">s_addr</td><td>Starting address of data to be sent </td></tr>
    <tr><td class="paramname">r_addr</td><td>Starting address of data receive buffer </td></tr>
    <tr><td class="paramname">length</td><td>The length of data to be read/sent</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t: The length of data written/read </dd></dl>

</div>
</div>
<a id="a9595f3065afd136c4ca5db78ce04f0cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9595f3065afd136c4ca5db78ce04f0cd">&#9670;&nbsp;</a></span>SPI_ReadOneByte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_ReadOneByte </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read one byte from the SPI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t: One byte data read from SPI </dd></dl>

</div>
</div>
<a id="a02e8bb3e1d2f0bdbef202a336257c569"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02e8bb3e1d2f0bdbef202a336257c569">&#9670;&nbsp;</a></span>SPI_WriteReadByte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t SPI_WriteReadByte </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read one byte from the SPI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number </td></tr>
    <tr><td class="paramname">data</td><td>Data byte to be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint8_t: One byte data read from SPI </dd></dl>

</div>
</div>
<a id="a3b73329a484334559ad9eb94431b1b79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b73329a484334559ad9eb94431b1b79">&#9670;&nbsp;</a></span>SPI_WriteReadData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t SPI_WriteReadData </td>
          <td>(</td>
          <td class="paramtype">SPI_ID_t&#160;</td>
          <td class="paramname"><em>SPIx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>s_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>r_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read and Write data to SPI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">SPIx</td><td>SPI number </td></tr>
    <tr><td class="paramname">s_data</td><td>Data to be sent </td></tr>
    <tr><td class="paramname">r_data</td><td>Data receive buffer </td></tr>
    <tr><td class="paramname">length</td><td>The length of data to be read/sent</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint32_t: The length of data written/read </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_753b352660b750374fdb4fc44e53afac.html">a9_spi_lib</a></li><li class="navelem"><a class="el" href="dir_b271a335de38efcd0ea8a65db34f670c.html">src</a></li><li class="navelem"><a class="el" href="spi__lib_8c.html">spi_lib.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
