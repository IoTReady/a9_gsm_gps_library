<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>A9/A9G Libraries using Ai-Thinker GPRS C SDK  0.1.0: MQTT Module for the AiThinker A9(GSM+GPRS) and A9G(GSM+GPRS+GPS)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">A9/A9G Libraries using Ai-Thinker GPRS C SDK  0.1.0
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_a9_mqtt_lib__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">MQTT Module for the AiThinker A9(GSM+GPRS) and A9G(GSM+GPRS+GPS) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md11"></a>
This library provides higher level wrapper APIs around the functions provided by the Ai-Thinker SDK.</h2>
<ul>
<li>The APIs provide easy to use functions that accept parameters for custom use-cases.</li>
<li>Single functions to initialize, subscribe and publish to MQTT brokers.</li>
<li>No need to handle complex structures. Just provide suitable parameters and you're good to go!</li>
<li>Supports SSL and non-SSL mqtt initializations.</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
Functions of this test example:</h2>
<p>This example demos the use of higher level APIs exposed by this library for simpler and faster coding to use MQTT pubsub features with SSL verification.</p>
<ul>
<li>Publish to a predefined topic in predefined intervals.(10 seconds by default)</li>
<li>Subscribe to a predefined topic.</li>
</ul>
<blockquote class="doxtable">
<p>To verify both the above features with one device, use the same topic for publish and subscribe. </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md13"></a>
Setting up and running the example for your AWS IoT:</h1>
<blockquote class="doxtable">
<p>This README assumes that you have already setup the GPRS_C_SDK and CSTDK. If not, please follow the instructions <a class="el" href="index.html#md_README">here</a> before continuing. </p>
</blockquote>
<ul>
<li>Please note that you will need an active SIM card inserted into the dev board in order to test this example successfully.</li>
<li>Copy the <a href="./a9_mqtt_lib">library folder</a> of this project into the <a href="https://github.com/Ai-Thinker-Open/GPRS_C_SDK/tree/master/demo">demo</a> folder of your installed SDK.</li>
<li>Define your AWS IoT endpoint against the BROKER_HOSTNAME macro in <a href="./a9_mqtt_lib/include/mqtt_config.h">mqtt_config.h</a> header file.</li>
<li>Enter the publish and subscribe topics under SUBSCRIBE_TOPIC and PUBLISH_TOPIC respectively. To test the example without access to the AWS IoT console, keep the subscribe topic the same as publish topic. This allows the device to subscribe to its own publish messages.</li>
<li>Paste the following into the <a href="./a9_mqtt_lib/include/certs.h">certs.h</a> file for SSL verification:<ul>
<li>Root CA certificate</li>
<li>Client certificate</li>
<li>Client private key</li>
</ul>
</li>
<li>Build and flash the code as mentioned <a class="el" href="index.html#md_README">here</a>. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
